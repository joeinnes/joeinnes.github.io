<!DOCTYPE html>
<html lang="en">
<title>Joe Innes | Gift Card</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="css/vendor.css">
<link rel="stylesheet" href="css/app.css">

<body>
  <section class="cf pa3 mw9 center">
    <header class="fn fl-ns pr4-ns">
      <nav class="mb1 mt0 bt bw2">
        <a href="/" class="link black fw9 dib mr3 f1 f-headline-ns">Joe Innes</a><br/>
        <a href="/" class="link black-50 f4 f3-ns dib mr3 underline">Home</a>
        <a href="/portfolio" class="link black-50 f4 f3-ns dib mr3">Portfolio</a>
      </nav>
    </header>
    <section class="fl w-100">
      <article class="cf">
        <div class="fl w-100 w-50-ns">
          <p class="lh-copy measure f4 f3-m f1-l pr1">
            <form id="form" class="pa4 black-80">
              <div class="measure">
                <label for="recipient" class="f6 b db mb2">Recipient</label>
                <input id="recipient" class="input-reset ba b--black-20 pa2 mb2 db w-100" type="text" /><br />
                <label for="amount" class="f6 b db mb2">Amount</label>
                <input id="amount" class="input-reset ba b--black-20 pa2 mb2 db w-100" type="text" /><br />
                <label for="site" class="f6 b db mb2">Site</label>
                <input id="site" class="input-reset ba b--black-20 pa2 mb2 db w-100" type="text" /><br />
                <label for="code" class="f6 b db mb2">Code</label>
                <input id="code" class="input-reset ba b--black-20 pa2 mb2 db w-100" type="text" /><br />
                <label for="blurb" class="f6 b db mb2">Blurb</label>
                <textarea id="blurb" class="db border-box hover-black w-100 measure ba b--black-20 pa2 br2 mb2"></textarea>
              </div>
            </form>
          </p>
        </div>
        <div class="fl w-100 w-50-ns">
          <p class="lh-copy measure pl1"><p id="json"></p><p id="link"></p></p>
        </div>
        <div class="fl w-100">
          <p class="lh-copy measure f4 f3-m f1-ns pl1"></p>
        </div>
      </article>
    </section>
  </section>
  <script>

    document.getElementById("form").addEventListener("change", () => {
      document.getElementById("json").innerText = buildJsonString()
      document.getElementById("link").innerText = "https://joeinn.es/gift-card#" + btoa(buildJsonString())
    })
    
    function buildJsonString() {
      const data = {
        "recipient": document.getElementById("recipient").value,
        "amount": document.getElementById("amount").value,
        "site": document.getElementById("site").value,
        "code": document.getElementById("code").value,
        "blurb": document.getElementById("blurb").value,
      }
      return JSON.stringify(data)
    }


    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-63929221-2', 'auto');
    ga('send', 'pageview');
  </script>
</body>
</html>
